language: rust
matrix:
  include:
    - os: linux
      rust: stable
      env: TARGET=x86_64-unknown-linux-gnu
    - os: linux
      rust: beta
      env: TARGET=x86_64-unknown-linux-gnu
    - os: linux
      rust: nightly
      env: TARGET=x86_64-unknown-linux-gnu
    - os: linux
      rust: stable
      env: TARGET=x86_64-unknown-linux-musl
    - os: linux
      rust: beta
      env: TARGET=x86_64-unknown-linux-musl
    - os: linux
      rust: nightly
      env: TARGET=x86_64-unknown-linux-musl
notifications:
    irc:
        channels:
            - "chat.freenode.net#libpnet"
        use_notice: true
script:
  - |
      git clone --depth=1 https://github.com/luigirizzo/netmap &&
      cargo build --target=$TARGET --verbose &&
      cargo test --target=$TARGET --verbose &&
      cargo build --target=$TARGET --features netmap_with_libs &&
      cargo test --target=$TARGET --features netmap_with_libs
